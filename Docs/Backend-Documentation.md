![npm 9.6.7](https://img.shields.io/badge/npm-9.6.7-brightgreen.svg)
![node 16.18.0](https://img.shields.io/badge/node-16.18.0-blue.svg)
[![developed_by 16.18.0](https://img.shields.io/badge/developed_by-Ammar_Yaser-blue.svg)](http://ammaryaser.com/)

\
![Cover](https://github.com/ammarbasuony/Backend-Project-Starter/blob/main/Docs/images/Cover.png?raw=true)


# âš™ï¸ Backend Setup

## ğŸ“œ Description
This is the backend part of the project. It's built using [Prisma ORM](https://www.prisma.io/), [TypeScript](https://www.typescriptlang.org/) and [Express](https://expressjs.com/).

â€ 

## ğŸ“ Project Structure
```
Backend
â”œâ”€â”€â”€ build (generated by running `npm run build`)
â”œâ”€â”€â”€ prisma
â”œâ”€â”€â”€ src
â”‚   â”œâ”€â”€â”€ assets
â”‚   â”œâ”€â”€â”€ config
â”‚   â”œâ”€â”€â”€ controllers
â”‚   â”œâ”€â”€â”€ middlewares
â”‚   â”œâ”€â”€â”€ models
â”‚   â”œâ”€â”€â”€ routes
â”‚   â”œâ”€â”€â”€ services
â”‚   â””â”€â”€â”€ utils
â”œâ”€â”€â”€ uploads (generated automatically when uploading files)
â”œâ”€â”€â”€ .env
â”œâ”€â”€â”€ .eslintrc.cjs
â”œâ”€â”€â”€ .gitignore
â”œâ”€â”€â”€ .prettierrc
â”œâ”€â”€â”€ package-lock.json
â”œâ”€â”€â”€ package.json
â””â”€â”€â”€ tsconfig.json
```

â€ 

## ğŸ“¥ Installation & Commands
1. Clone the project
2. Open the terminal in the project directory
3. Run `npm install` to install the dependencies
4. Run `npm run dev` to start the development server
5. Run `npm run build` to build the project
6. Run `npm start` to start the production server

â€ 

## ğŸ’¾ Setting Up the Database
This project uses MySQL as a database.\
You can use any other database, but you'll need to change the database configuration in the `.env` file.

1. Create a new database called `backend-starter` or any other name you want but you'll need to change the database name in the `.env` file.
2. Go to the `prisma/schema.prisma` file and change the schema as you want.\
`model` represents a table and `@id` is the primary key.\
`@default(autoincrement())` is the auto-incremented primary key. And so on.
    ```
    model User {
    id                          Int      @id @default(autoincrement())
    email                       String   @unique
    password                    String
    profilePicture              String   @default("/assets/png/no-picture.png")
    name                        String
    role                        Role     @relation(fields: [roleId], references: [id])
    roleId                      Int
    createdAt                   DateTime @default(now())
    updatedAt                   DateTime @updatedAt
    }
    ```
3. Run `npm run db:migrate` to create the database tables.
4. run `npm run db:generate` to generate the Prisma client.

â€

## ğŸ“¦ Generic Services
Generic services are services that can be used with any controller.\

### ğŸ“ `GeneralCRUD` Service
This service is used to create a CRUD methods for any model.\
\
For example, if you want to create a CRUD for the `Categories` model, you'll need to create a new file called `category.controller.ts` in the `controller` folder and add the following code:

```typescript
// Services
import GeneralCRUDService from '../services/general-crud.service.js';

// CRUD Functions
export default {
  ...GeneralCRUDService('category'),
};
```

`GeneralCRUDService` takes parameters as follows:

| Parameter | Type | Description | Example | Is Required | Default Value |
| --- | --- | --- | --- | --- | --- |
| `model` | `string` | The name of the model. | `'category'` | `true` | - |
| `include` | `object` | The relations that you want to include. | `{ products: true }` | `false` | `{}` |
| `uploadInputName` | `string` | The name of the input that you want to upload with, in case you have files in the model. | `'image'` | `false` | `''` |
| `hiddenAttributes` | `string[]` | The attributes that you want to hide from the response. | `['password']` | `false` | `[]` |
| `currentPage` | `number` | The current page number. | `1` | `false` | `1` |
| `recordsPerPage` | `number` | The number of items per page. | `10` | `false` | `30` |

â€

## ğŸ” Authentication
This project uses [JWT](https://jwt.io/) for authentication.\
\
The authentication is done using the `auth.middleware.ts` middleware.\
\
You can use it in any route as follows:

```typescript
// Middlewares
import authMiddleware from '../middlewares/auth.middleware.js';

// Routes
router.get('/users', authMiddleware, userController.getAll);
```

â€

## ğŸ§ª Testing the End-Points
You can test the end-points using [Postman](https://www.postman.com/).

You can find the postman collection in the root folder of the repo.

â€

## ğŸ—ï¸ Build Stage
After finishing the development stage, you'll need to build the project.\
\
You can build the project using the following command:

```bash
npm run build
```

This command will generate a `build` folder that contains the compiled code.\
\
You can run the production server using the following command:

```bash
npm start
```

â€

---

## ğŸ‘‹ğŸ¼ Farewell for now! Take care and keep coding ! ğŸ’«