![npm 9.6.7](https://img.shields.io/badge/npm-9.6.7-brightgreen.svg)
![node 16.18.0](https://img.shields.io/badge/node-16.18.0-blue.svg)
[![developed_by 16.18.0](https://img.shields.io/badge/developed_by-Ammar_Yaser-blue.svg)](http://ammaryaser.com/)

\
![Cover](https://github.com/ammarbasuony/Backend-Project-Starter/blob/main/Docs/images/Cover.png?raw=true)


# âš™ï¸ Frontend Setup

## ðŸ“œ Description
This is the frontend part of the project. It's built using [React](https://reactjs.org/), [TypeScript](https://www.typescriptlang.org/) and [Metronic Theme](https://keenthemes.com/metronic/).

â€Ž

## ðŸ“ Project Structure
```
Dahsboard
â”œâ”€â”€â”€ build (generated by running `npm run build`)
â”œâ”€â”€â”€ public
â”œâ”€â”€â”€ src
â”‚   â”œâ”€â”€â”€ _metronic
â”‚   â”œâ”€â”€â”€ app
â”‚   â”‚   â”œâ”€â”€â”€ api
â”‚   â”‚   â”œâ”€â”€â”€ assets
â”‚   â”‚   â”œâ”€â”€â”€ components
â”‚   â”‚   â”œâ”€â”€â”€ data
â”‚   â”‚   â”œâ”€â”€â”€ hooks
â”‚   â”‚   â”œâ”€â”€â”€ models
â”‚   â”‚   â”œâ”€â”€â”€ modules
â”‚   â”‚   â”œâ”€â”€â”€ page
â”‚   â”‚   â”œâ”€â”€â”€ routing
â”‚   â”‚   â”œâ”€â”€â”€ store
â”‚   â”‚   â”œâ”€â”€â”€ styles
â”‚   â”‚   â”œâ”€â”€â”€ utils
â”‚   â”‚   â”œâ”€â”€â”€ utils
â”‚   â”‚   â””â”€â”€â”€ properties.json
â”‚   â”œâ”€â”€â”€ declaration.d.ts
â”‚   â””â”€â”€â”€index.tsx
â”œâ”€â”€â”€ .env
â”œâ”€â”€â”€ .prettierignore
â”œâ”€â”€â”€ .prettierrc
â”œâ”€â”€â”€ package-lock.json
â”œâ”€â”€â”€ package.json
â”œâ”€â”€â”€ rtl.config.js
â””â”€â”€â”€ tsconfig.json
```

â€Ž

## ðŸ“¥ Installation & Commands
1. Clone the project
2. Open the terminal in the project directory
3. Run `npm install` to install the dependencies
4. Run `npm start` to start the development server (http://localhost:3011)
5. Run `npm run build` to build the project

â€Ž

## ðŸ“¡ APIs
This project uses the APIs from the backend project.\
You will find three main files in the `src/app/api` folder:
1. `auth.api.ts`: Contains the APIs related to authentication.
2. `dashboard.api.ts`: Contains the APIs related to the dashboard, like getting the statistics.
3. `generic-crud.api.ts`: Contains the APIs related to the generic CRUD operations, like getting all the categories.

Based on the consistency of the backend APIs, i've created `generic-crud.api.ts` to handle all the CRUD operations by just passing the model name and the data.

â€Ž

## ðŸ“ Main Concept
The main purpose of the dashboards is to display the data in a meaningful way.\ Commonly in tables, with ability to filter, sort and search the data.\ Also, the ability to add, edit and delete the data.\
\
That's why i've created a generic CRUD module that can be used to display any data in a table, with the ability to filter, sort and search the data.\

### ðŸ“Œ How to use the generic CRUD module?
Our main focus will be in `app/pages` folder.\
\
When we want to have new table (model) we create a new folder in `app/pages` with the name of the model.\
For example, if we want to create a table for `categories`, we will create a folder called `Categories` in `app/pages`.\

Inside the `Categories` folder, we will create two files:
1. `index.tsx`: This is the main file that will contain our simple logic.
2. `data.categories.ts`: This file will contain the columns (fields) of the table.

â€Ž

### ðŸ“Œ `data.categories.ts`
This file will contain the columns (fields) of the table.\
\
For example:
```ts
export const columns = [
  {
    name: 'Name',
    accessor: 'name',
    attr: 'name',
    type: 'text',
    required: true,
  },
  {
    name: 'Created At',
    accessor: 'createdAt',
    attr: 'createdAt',
    mode: 'labeled',
    type: 'date',
  },
  {
    name: 'Last Updated At',
    accessor: 'updatedAt',
    attr: 'updatedAt',
    mode: 'labeled',
    type: 'date',
  },
]
```

For `CreatedAt` and `UpdatedAt` fields, keep them in all the tables, because they are required by the generic CRUD module.\

We get the fields from the backend `prisma/schema.prisma` file.\

```
model Category {
  id                          Int      @id @default(autoincrement())
  name                        String
  createdAt                   DateTime @default(now())
  updatedAt                   DateTime @updatedAt
  Post                        Post[]
}
```

As you can see we just have the `name` field besides `createdAt` and `updatedAt`. So these are the fields that we've added

### ðŸ“Œ `pages/Categories/index.tsx`

As our example here we will inport the `columns` and dispatch some actions to our Redux `store`

```ts
import {useEffect, useState} from 'react'
import {useSearchParams} from 'react-router-dom'
import RecordsList from '../../components/GenericCRUD/RecordsList'
import {useDispatch, useSelector} from 'react-redux'

// Utils
import {Roles} from '../../utils/constants.util'

// Actions
import {
  setTableData,
  setTableColumns,
  setTableName,
  setIsTableHasFiles,
  setIsOperationDone,
  setOperationsPermissions,
  setTotalRecords,
} from '../../store/actions'

// Data
import {columns} from './data.categories'

// API
import genericCrudAPI from '../../api/generic-crud.api'

// Types
import {IState} from '../../models/reducer.types'

// Utils
import {excludeColumns} from '../../utils/constants.util'

const Categories = () => {
  const dispatch = useDispatch()
  const {isOperationDone} = useSelector((state: IState) => state.crudReducer)
  const [searchParams] = useSearchParams()

  const [params, setParams] = useState<any>({})
  const [isParamsChanged, setIsParamsChanged] = useState<boolean>(false)

  const getSearchParams = () => {
    const filterFields = columns.filter(
      (field) => !excludeColumns.includes(field.attr) && field.type !== 'image'
    )

    // get filters from search params if exist
    const searchParamsObj: any = {}

    if (searchParams.get('page')) {
      searchParamsObj['page'] = searchParams.get('page')
    }

    if (searchParams.get('search')) {
      searchParamsObj['search'] = searchParams.get('search')
    }

    filterFields.forEach((field) => {
      if (searchParams.get(field.attr)) {
        searchParamsObj[field.attr] = searchParams.get(field.attr)
      }
    })
    setParams(searchParamsObj)
    setIsParamsChanged(true)
  }

  const fetchData = async () => {
    const response = await genericCrudAPI('categories').getAll(params)

    dispatch(setTableData(response.data))
    dispatch(setTotalRecords(response.totalRecords))
    dispatch(setTableColumns(columns))
    dispatch(setTableName('categories'))
    dispatch(setIsTableHasFiles(false))
    dispatch(setIsOperationDone(false))
    dispatch(setOperationsPermissions(Roles.ALLOW_CATEGORIES_VIEW))
  }

  useEffect(() => {
    getSearchParams()
  }, [])

  useEffect(() => {
    if (!isParamsChanged) return

    fetchData()
  }, [isOperationDone, isParamsChanged])

  return (
    <div>
      <RecordsList />
    </div>
  )
}

export default Categories
```

Our main focus here on the 7 dispatches we did